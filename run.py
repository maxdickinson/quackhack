import flaskfrom flask import request  # Data from a submitted formfrom flask import url_forfrom flask import jsonify # For AJAX transactionsimport jsonimport loggingimport argparse  # For the vocabulary listimport sys#### Globals###app = flask.Flask(__name__)@app.route("/")def index():  return flask.render_template('app.html')app.run()#when link is clicked should redirect to here@app.route('/oauth2')def oauth2():  """  The 'flow' has this one place to call back to.  We'll enter here  more than once as steps in the flow are completed, and need to keep  track of how far we've gotten. The first time we'll do the first  step, the second time we'll skip the first step and do the second,  and so on.  """  app.logger.debug("Entering oauth2callback")  ##flow =  client.flow_from_clientsecrets(     # scope= user_read,      #redirect_uri=flask.url_for('oauth2callback', _external=True))  ## Note we are *not* redirecting above.  We are noting *where*  ## we will redirect to, which is this function.     ## The *second* time we enter here, it's a callback   ## with 'code' set in the URL parameter.  If we don't  ## see that, it must be the first time through, so we  ## need to do step 1.   app.logger.debug("Got flow")  if 'code' not in flask.request.args:    app.logger.debug("Code not in flask.request.args")    auth_uri = flow.step1_get_authorize_url()    return flask.redirect(auth_uri)    ## This will redirect back here, but the second time through    ## we'll have the 'code' parameter set  else:    ## It's the second time through ... we can tell because    ## we got the 'code' argument in the URL.    app.logger.debug("Code was in flask.request.args")    auth_code = flask.request.args.get('code')    credentials = flow.step2_exchange(auth_code)    flask.session['credentials'] = credentials.to_json()    ## Now I can build the service and execute the query,    ## but for the moment I'll just log it and go back to    ## the main screen    app.logger.debug("Got credentials")    return flask.redirect(flask.url_for('index'))#redirect to the main page hopefully